Факторные переменные, именуемые также *категориальными переменными*, принимают предельное число дискретных значений. Например, целью ссуды может быть "консолидация задолженности", "свадьба", "автомобиль" и т.д. Двоичная переменная, именуемая также *индикаторной переменной*, является особым случаем факторной переменной. Регрессия требует на входе числовые данные, поэтому факторные переменные нужно перекодировать, чтобы их можно было использовать в модели. Наиболее часто встречающийся подход состоит в конвертировании переменной во множество двоичных *фиктивных* переменных.

**Ключевые термины для факторных переменных регрессий:**

* **Фиктивные переменные (dummy variables)** - двоичные переменные, принимающие значение 0 и 1 и выводимые путем перекодирования факторных данных, для использования в регрессии и других моделях.
* **Опорное кодирование (Reference coding)** - наиболее часто встречающийся тип кодирования, используемый в статистике, в котором один уровень фактора выбирается в качестве опорного, а другие факторы сопоставляются с этим уровнем.
* **Кодировщик с одним активным состоянием (one hot encoding)** - тип кодирования, общепринятый в сообществе машинного обучения, при котором сохраняются все уровни факторов. Широко используется в некоторых автоматически обучающихся алгоритмах; вместе с тем этот прием не подходит для множественной линейной регрессии.
* **Девиационное кодирование (deviation coding)** - тип кодирования, при котором каждый уровень сравнивается не с опорным уровнем, а с совокупным средним.

В Python мы можем конвертировать категориальные переменные с помощью метода **get_dummies** пакета **pandas**:

```python
pd.get_dummies(house['PropertyType']).head() # 1-ый способ
pd.get_dummies(house['PropertyType'], drop_first=True) # 2-ой способ
```

По умолчанию возвращает одну кодировку категориальной переменной с одним активным состоянием, а именованный аргумент **drop_first** будет возвращать $P-1$ столбцов. Используйте его во избежание мультиколлинеарности.

В регрессионной формулировке факторная переменная с $P$ четко различимыми уровнями обычно представляется матрицей только с $P-1$ столбцами. Это обусловлено тем, что регрессионная модель в типичной ситуации включает член пересечения. Говоря о пересечении, после того как вы определили значения для $P-1$ двоичных столбцов, значение $P$-го столбца становится известным и может считаться избыточным и вызвать ошибку мультиколлинеарности.

### Факторные переменные с многочисленными уровнями

Некоторые факторные переменные могут производить огромное число двоичных фиктивных переменных - почтовые индексы - это образец факторной переменной, а в США имеется 43 тыс. почтовых индексов. В таких случаях полезно разведать данные,  а также сязи между предсказательными переменными и исходом, чтобы определить наличие полезной информации в категориях. Если она имеется, то далее вы должны принять решение о том, имеет ли смысл оставить все факторы, или о том, следует ли уровни консолидировать.

### Упорядоченные факторные переменные

Некоторые факторные переменные отражают уровни фактора; они называются *упорядоченными факторными переменными*. Например, категория ссуды может быть A, B, C и т.д. - каждая категория несет в себе больший риск, чем предыдущая категория. Нередко упорядоченные факторные переменные могут быть конвертированны в числовые значения и использоваться как есть.

**Ключевые идеи для факторных переменных в регрессии:**

* Факторные переменные должны быть конвертированны в числовые переменные для их использование в регрессии.
* Наиболее часто встречающийся метод кодирования факторной переменной с $P$ четко различимыми значениями - представлять их с использованием $P-1$ фиктивных переменных.
* Факторная переменная с многочисленными переменными даже в очень больших наборах данных может потребовать консолидации в переменную с меньшим числом уровней.
* Некоторые факторы имеют упорядоченные уровни и могут быть представлены в качестве единой числовой переменной.